---
import Layout from '../layouts/Layout.astro';

const pageTitle = 'Contact Us - Online College Courses';
const pageDescription = 'Get in touch with us. We\'re here to help with questions about courses, partnerships, or using our platform.';
---

<Layout title={pageTitle} description={pageDescription}>
  <main class="contact-page">
    <div class="hero-section">
      <div class="container">
        <h1 class="page-title">Contact Us</h1>
        <p class="page-subtitle">
          Have a question? We're here to help. Send us a message and we'll get back to you as soon as possible.
        </p>
      </div>
    </div>

    <div class="container">
      <div class="content-grid">
        <!-- Contact Form -->
        <div class="form-section">
          <form id="contactForm" class="contact-form">
            <div class="form-group">
              <label for="name" class="form-label">Your Name <span class="required">*</span></label>
              <input
                type="text"
                id="name"
                name="name"
                required
                placeholder="John Doe"
                class="form-input"
              />
            </div>

            <div class="form-group">
              <label for="email" class="form-label">Your Email <span class="required">*</span></label>
              <input
                type="email"
                id="email"
                name="email"
                required
                placeholder="john@example.com"
                class="form-input"
              />
            </div>

            <div class="form-group">
              <label for="subject" class="form-label">Subject <span class="required">*</span></label>
              <select id="subject" name="subject" required class="form-select">
                <option value="">-- Select a topic --</option>
                <option value="general">General Inquiry</option>
                <option value="course">Question About a Course</option>
                <option value="partnership">Partnership Opportunity</option>
                <option value="feedback">Feedback or Suggestion</option>
                <option value="technical">Technical Issue</option>
                <option value="other">Other</option>
              </select>
            </div>

            <div class="form-group">
              <label for="message" class="form-label">Message <span class="required">*</span></label>
              <textarea
                id="message"
                name="message"
                required
                rows="8"
                placeholder="Tell us how we can help..."
                class="form-textarea"
              ></textarea>
            </div>

            <button type="submit" class="submit-button" id="submitButton">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <line x1="22" y1="2" x2="11" y2="13"/>
                <polygon points="22 2 15 22 11 13 2 9 22 2"/>
              </svg>
              Send Message
            </button>

            <!-- Status Messages -->
            <div id="successMessage" class="message success-message" style="display: none;">
              <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/>
                <polyline points="22 4 12 14.01 9 11.01"/>
              </svg>
              <div>
                <strong>Message sent successfully!</strong>
                <p>We'll get back to you within 24-48 hours.</p>
              </div>
            </div>

            <div id="errorMessage" class="message error-message" style="display: none;">
              <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <circle cx="12" cy="12" r="10"/>
                <line x1="12" y1="8" x2="12" y2="12"/>
                <line x1="12" y1="16" x2="12.01" y2="16"/>
              </svg>
              <div>
                <strong>Error sending message</strong>
                <p id="errorText">Please try again later.</p>
              </div>
            </div>
          </form>
        </div>

        <!-- Contact Info Sidebar -->
        <aside class="contact-sidebar">
          <div class="info-card">
            <h3>Quick Responses</h3>
            <p>We typically respond within 24-48 hours during business days.</p>
          </div>

          <div class="info-card">
            <h3>Before You Contact Us</h3>
            <ul class="faq-list">
              <li>
                <strong>Course Information:</strong> Check the individual course page for detailed information
              </li>
              <li>
                <strong>Enrollment:</strong> Contact the institution directly for enrollment questions
              </li>
              <li>
                <strong>Reviews:</strong> Use our <a href="/rate-my-course">Rate My Course</a> page
              </li>
            </ul>
          </div>

          <div class="info-card social-card">
            <h3>Connect With Us</h3>
            <div class="social-links">
              <a href="#" class="social-link">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                  <path d="M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z"/>
                </svg>
                Facebook
              </a>
              <a href="#" class="social-link">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                  <path d="M23 3a10.9 10.9 0 0 1-3.14 1.53 4.48 4.48 0 0 0-7.86 3v1A10.66 10.66 0 0 1 3 4s-4 9 5 13a11.64 11.64 0 0 1-7 2c9 5 20 0 20-11.5a4.5 4.5 0 0 0-.08-.83A7.72 7.72 0 0 0 23 3z"/>
                </svg>
                Twitter
              </a>
              <a href="#" class="social-link">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                  <path d="M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z"/>
                  <rect x="2" y="9" width="4" height="12"/>
                  <circle cx="4" cy="4" r="2"/>
                </svg>
                LinkedIn
              </a>
            </div>
          </div>
        </aside>
      </div>
    </div>
  </main>
</Layout>

<style>
  .contact-page {
    min-height: 100vh;
    background: var(--neutral-50);
  }

  .container {
    max-width: 1200px;
    margin: 0 auto;
    padding: 0 calc(var(--spacing) * 3);
  }

  .hero-section {
    background: linear-gradient(135deg, #1e40af 0%, #0ea5e9 100%);
    padding: calc(var(--spacing) * 8) 0;
    margin-bottom: calc(var(--spacing) * 6);
    text-align: center;
  }

  .page-title {
    font-size: 3.5rem;
    color: white;
    margin-bottom: calc(var(--spacing) * 2);
  }

  .page-subtitle {
    font-size: 1.25rem;
    color: rgba(255, 255, 255, 0.95);
    max-width: 700px;
    margin: 0 auto;
    line-height: 1.6;
  }

  .content-grid {
    display: grid;
    grid-template-columns: 1fr 350px;
    gap: calc(var(--spacing) * 6);
    margin-bottom: calc(var(--spacing) * 8);
  }

  /* Form Styles */
  .contact-form {
    background: white;
    padding: calc(var(--spacing) * 5);
    border-radius: calc(var(--border-radius) * 1.5);
    box-shadow: var(--shadow-lg);
    border: 1px solid var(--neutral-200);
  }

  .form-group {
    margin-bottom: calc(var(--spacing) * 3);
  }

  .form-label {
    display: block;
    font-weight: 600;
    color: var(--neutral-900);
    margin-bottom: calc(var(--spacing) * 1.5);
  }

  .required {
    color: var(--color-error);
  }

  .form-input,
  .form-select,
  .form-textarea {
    width: 100%;
    padding: calc(var(--spacing) * 2);
    border: 2px solid var(--neutral-200);
    border-radius: calc(var(--border-radius) / 2);
    font-size: 1rem;
    font-family: var(--font-primary);
    transition: var(--transition);
  }

  .form-input:focus,
  .form-select:focus,
  .form-textarea:focus {
    outline: none;
    border-color: var(--color-primary);
    box-shadow: 0 0 0 3px rgba(30, 64, 175, 0.1);
  }

  .form-textarea {
    resize: vertical;
  }

  .submit-button {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: calc(var(--spacing) * 1.5);
    width: 100%;
    padding: calc(var(--spacing) * 3);
    background: linear-gradient(135deg, #1e40af 0%, #0ea5e9 100%);
    color: white;
    font-weight: 700;
    font-size: 1.125rem;
    border: none;
    border-radius: calc(var(--border-radius) / 2);
    cursor: pointer;
    transition: var(--transition);
  }

  .submit-button:hover:not(:disabled) {
    background: linear-gradient(135deg, #1e3a8a 0%, #0284c7 100%);
    transform: translateY(-2px);
    box-shadow: 0 8px 24px rgba(30, 64, 175, 0.3);
  }

  .submit-button:disabled {
    opacity: 0.6;
    cursor: not-allowed;
  }

  .message {
    display: flex;
    gap: calc(var(--spacing) * 2);
    padding: calc(var(--spacing) * 3);
    border-radius: calc(var(--border-radius) / 2);
    margin-top: calc(var(--spacing) * 3);
  }

  .success-message {
    background: #d1fae5;
    color: #065f46;
    border: 2px solid #10b981;
  }

  .error-message {
    background: #fee2e2;
    color: #991b1b;
    border: 2px solid #ef4444;
  }

  .message strong {
    display: block;
    margin-bottom: calc(var(--spacing) * 0.5);
  }

  /* Sidebar */
  .contact-sidebar {
    display: flex;
    flex-direction: column;
    gap: calc(var(--spacing) * 3);
  }

  .info-card {
    background: white;
    padding: calc(var(--spacing) * 3);
    border-radius: calc(var(--border-radius) * 1.25);
    box-shadow: var(--shadow-md);
    border: 1px solid var(--neutral-200);
  }

  .info-card h3 {
    font-size: 1.25rem;
    color: var(--neutral-900);
    margin-bottom: calc(var(--spacing) * 2);
  }

  .info-card p {
    font-size: 0.9375rem;
    color: var(--neutral-700);
    line-height: 1.6;
  }

  .faq-list {
    list-style: none;
    display: flex;
    flex-direction: column;
    gap: calc(var(--spacing) * 2);
  }

  .faq-list li {
    font-size: 0.9375rem;
    line-height: 1.6;
    color: var(--neutral-700);
  }

  .faq-list strong {
    color: var(--neutral-900);
    display: block;
    margin-bottom: calc(var(--spacing) * 0.5);
  }

  .faq-list a {
    color: var(--color-primary);
    text-decoration: underline;
  }

  .social-card {
    background: linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%);
  }

  .social-links {
    display: flex;
    flex-direction: column;
    gap: calc(var(--spacing) * 1.5);
  }

  .social-link {
    display: flex;
    align-items: center;
    gap: calc(var(--spacing) * 2);
    padding: calc(var(--spacing) * 2);
    background: white;
    color: var(--neutral-700);
    font-weight: 500;
    border-radius: calc(var(--border-radius) / 2);
    text-decoration: none;
    transition: var(--transition);
    border: 1px solid var(--neutral-200);
  }

  .social-link:hover {
    background: var(--color-primary);
    color: white;
    border-color: var(--color-primary);
    transform: translateX(4px);
  }

  /* Responsive */
  @media (max-width: 1024px) {
    .content-grid {
      grid-template-columns: 1fr;
    }

    .contact-sidebar {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    }
  }

  @media (max-width: 768px) {
    .page-title {
      font-size: 2.5rem;
    }

    .contact-sidebar {
      grid-template-columns: 1fr;
    }
  }
</style>

<script>
  const form = document.getElementById('contactForm') as HTMLFormElement;
  const submitButton = document.getElementById('submitButton') as HTMLButtonElement;
  const successMessage = document.getElementById('successMessage') as HTMLDivElement;
  const errorMessage = document.getElementById('errorMessage') as HTMLDivElement;

  form?.addEventListener('submit', async (e) => {
    e.preventDefault();
    
    successMessage.style.display = 'none';
    errorMessage.style.display = 'none';
    
    submitButton.disabled = true;
    submitButton.textContent = 'Sending...';

    try {
      const formData = new FormData(form);
      
      // TODO: Integrate with your email service or Netlify Forms
      // For now, just log to console
      console.log('Contact form submission:', Object.fromEntries(formData));
      
      // Simulate API call
      await new Promise(resolve => setTimeout(resolve, 1000));
      
      successMessage.style.display = 'flex';
      form.reset();
      successMessage.scrollIntoView({ behavior: 'smooth', block: 'center' });
      
    } catch (error) {
      console.error('Error submitting form:', error);
      errorMessage.style.display = 'flex';
      errorMessage.scrollIntoView({ behavior: 'smooth', block: 'center' });
    } finally {
      submitButton.disabled = false;
      submitButton.innerHTML = `
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <line x1="22" y1="2" x2="11" y2="13"/>
          <polygon points="22 2 15 22 11 13 2 9 22 2"/>
        </svg>
        Send Message
      `;
    }
  });
</script>
